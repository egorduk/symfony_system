services:
    _defaults:
        public: true
        autoconfigure: true
        autowire: true

    secure.service.date_time:
        class: SecureBundle\Service\DateTimeService

    secure.service.orders:
        class: SecureBundle\Service\OrdersService
        arguments: ['@em']

    secure.service.repository_factory:
        class: SecureBundle\Factory\EntityRepositoryFactory
        arguments: ['%entity_repositories%']

    secure.service.order:
        class: SecureBundle\Service\UserOrderService
        arguments:
            - '@em'
            - '@router'
            - '@secure.service.file'
            - '@secure.service.date_time'
            - '@secure.repository.status_order'
            - '@secure.repository.user_order'
            - '@secure.service.bid'
            - '@event_dispatcher'
            - '@secure.service.setting'

    secure.service.file:
        class: SecureBundle\Service\FileService
        arguments: ['@em', '@router']

    secure.service.bid:
        class: SecureBundle\Service\BidService
        arguments: ['@em', '@secure.service.date_time', '@secure.repository.user_bid']

    app.twig:
        class: SecureBundle\Twig\Extension\AppExtension
        tags:
            - { name: twig.extension }

    app.twig_runtime:
        class: SecureBundle\Twig\AppRuntime
        arguments: ['@secure.service.user', '@assets.packages', '%secure_bundle_web_dir%']
        public: false
        tags:
            - { name: twig.runtime }

    secure.service.user:
        class: SecureBundle\Service\UserService
        arguments: ['@doctrine.orm.entity_manager', '@assets.packages', '%file_upload_dir_user_avatars%', '@router']

    secure.service.user_activity:
        class: SecureBundle\Service\UserActivityService
        arguments: ['@secure.repository.user_activity']

    secure.service.setting:
        class: SecureBundle\Service\SettingService
        arguments: ['@secure.repository.setting']

    secure.service.image:
        class: SecureBundle\Service\ImageService
        arguments: ['@doctrine.orm.entity_manager', '@router', '@secure.service.user']

    secure.service.status_order:
        class: SecureBundle\Service\StatusOrderService
        arguments: ['@secure.repository.status_order']

    secure.service.stage_order:
        class: SecureBundle\Service\StageOrderService
        arguments: ['@secure.repository.stage_order']



    secure.mail_helper:
        class: SecureBundle\Service\MailService
        arguments: ['@doctrine.orm.entity_manager', '%mail_options%', '@mailer']

#    auth.captcha_service:
#        class: AuthBundle\Service\Captcha\Captcha


#
#    secure.validate_file_listener_gallery:
#        class: SecureBundle\EventListener\ValidateFileListener
#        arguments: ['@secure.service.files']
#        tags:
#            - { name: kernel.event_listener, event: oneup_uploader.validation.gallery, method: onValidate }
#
#    secure.file_upload_error_handler:
#        arguments: ['@secure.service.files']
#        class: SecureBundle\Service\Handler\UploadFileErrorHandler